Following is the requirement from CC side for your MTP project.


1. Writing a program in go language which can transparently send requests
to multiple squids(proxy).
2. User activity logging in the format of squid is required.
3. Scaling behavior to be studied/analysed under different load conditions
for latency.
4. Connection management with a view to balance load across the backend
squid servers.
5. Firewall connections logging feature to be implemented.



It is configured for both the ip addresses. You can ssh to the servers
using ip addresses 10.201.23.1/2/3/4/5 with userid "jayant" and passcode
"jayant@123". The following command will show you the logs for a
particular ip.

ssh 10.201.23.1

tail -f //squid.logs.datewise/access.log.20170201 | grep 10.14.31.10

cat //squid.logs.datewise/access.log.20170201 | grep 10.14.31.10


from the file name you can make out that it is a today's access file. e.g.
access.log.yyyymmdd.

So depending on the today's date you have to access the respective file
while debugging. If you have any doubts then kindly let me know.



iptables -t nat -A OUTPUT -d 0/0 -p tcp --dport 443 -j DNAT --to-destination 127.0.0.1:3129

iptables -t nat -A OUTPUT -d 0/0 -p tcp --dport 443 -j DNAT --to-destination 10.129.40.100:3129

tail -f /var/log/any_proxy.log

CC lab machine IP : 10.100.106.111

The following example redirects TCP port 25 to port 2525:

iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 443 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 143 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 993 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 110 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 995 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 20 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 21 -j REDIRECT --to-port 3129


iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 443 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 80 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 143 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 993 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 110 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 995 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 20 -j REDIRECT --to-port 3129
iptables -t nat -A PREROUTING -i eth1 -p tcp --dport 21 -j REDIRECT --to-port 3129

CC VM IP address : 10.201.23.17
ssh root@10.201.23.17

curl -d "uname=153050062&passwd=jayant@9764718672&submit=Login" --dump-header headers https://internet.iitb.ac.in/index.php

To measure the cpu utilisaiton of all cpu : 
mpstat -P ALL 1

working PC : 100, 101, 103, 104

Maximum clients from one Machine using Jmeter : 300
Jmeter plugins


Short explanation looks like:

Sample - number of requests sent
Avg - an Arithmetic mean for all responses (sum of all times / count)
Minimal response time (ms)
Maximum response time (ms)
Deviation - see Standard Deviation article
Error rate - percentage of failed tests
Throughput - how many requests per second does your server handle. Larger is better.
KB/Sec - self expalanatory
Avg. Bytes - average response size

10.129.40.90  master
10.129.40.91  slave1
10.129.40.92   slave2
10.129.40.93  slave3
10.129.40.94   slave4
10.129.40.95   slave5


10.129.40.105  master
10.129.40.106  slave1
10.129.40.107   slave2
10.129.40.108  slave3
10.129.40.109   slave4
10.129.40.110   slave5



ssh -n -f root@10.201.23.17 "sh -c 'cd go-any-proxy; nohup sudo ./run.sh > /dev/null 2>&1 &'"

ssh -n -f root@10.201.60.121 "sh -c 'cd go-any-proxy; nohup sudo ./run.sh > /dev/null 2>&1 &'"